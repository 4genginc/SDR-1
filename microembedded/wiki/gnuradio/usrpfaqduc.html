<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage"><!-- InstanceBegin template="/Templates/gnuradio.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<link rel="shortcut icon" type="image/x-icon" href="../images/sites-16.ico" />
<!--声明当前的页面的编码集-->
<meta charset="utf-8"/>
<meta name="title" content="GNU Radio 中文社区">
<meta itemprop="name" content="GNU Radio 中文社区">
<meta property="og:title" content="GNU Radio 中文社区">
<meta name="description" content="微嵌 - GNU Radio 中文维客 由 微嵌软件技术(北京)有限责任公司维护。GNU Radio 是免费的软件开发工具套件。它提供信号运行和处理模块，用它可以在易制作的低成本的射频（RF）硬件（比如：USRP 和USRP2）和通用微处理器上实现软件定义无线电。这套套件广泛用于业余爱好者，学术机构和商业机构用来研究和构建无线通信系统。">
<meta itemprop="description" content="微嵌 - GNU Radio 中文维客 由 微嵌软件技术(北京)有限责任公司维护。GNU Radio 是免费的软件开发工具套件。它提供信号运行和处理模块，用它可以在易制作的低成本的射频（RF）硬件（比如：USRP 和USRP2）和通用微处理器上实现软件定义无线电。这套套件广泛用于业余爱好者，学术机构和商业机构用来研究和构建无线通信系统。">
<meta id="meta-tag-description" property="og:description" content="微嵌 - GNU Radio 中文维客 由 微嵌软件技术(北京)有限责任公司维护。GNU Radio 是免费的软件开发工具套件。它提供信号运行和处理模块，用它可以在易制作的低成本的射频（RF）硬件（比如：USRP 和USRP2）和通用微处理器上实现软件定义无线电。这套套件广泛用于业余爱好者，学术机构和商业机构用来研究和构建无线通信系统。">
<!-- InstanceBeginEditable name="doctitle" -->
<title>GNU Radio 中文社区</title>
<!-- InstanceEndEditable -->
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
<link rel="stylesheet" type="text/css" href="../css/css.css">
<link rel="stylesheet" type="text/css" href="../css/overlay.css">
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" zh_CN">
<div id="sites-chrome-everything-scrollbar">
    <div id="sites-chrome-everything" class="">
        <div id="sites-chrome-page-wrapper" style="direction: ltr">
            <div id="sites-chrome-page-wrapper-inside">
                <div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
                    <table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
                        <tbody>
                            <tr class="sites-header-primary-row" id="sites-chrome-userheader">
                                <td id="sites-header-title" class="sites-chrome-header-valign-bottom"><div class="sites-header-cell-buffer-wrapper">
                                        <h2><a href="http://gnuradio.microembedded.com/" id="sites-chrome-userheader-logo"> <img id="logo-img-id" src="../images/logo.jpg" alt="GNU Radio 中文社区" class="sites-logo sites-chrome-header-valign-bottom "></a></h2>
                                    </div></td>
                            </tr>
                            <tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
                                <td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="sites-chrome-main-wrapper">
                    <div id="sites-chrome-main-wrapper-inside">
                    <!-- InstanceBeginEditable name="head" -->
                    <table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tbody><tr>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="display: none;">
</div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="display: none;" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">UsrpFAQDUC</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div dir="ltr">
<p><a href="http://gnuradio.org/redmine/wiki/gnuradio/UsrpFAQDUC" target="_blank"></a></p>
<h2><a name="TOC-1"></a><font size="3">数字上变频问题</font><br></h2>
<p style="text-align:right"><b><font size="2">[ <a href="usrpfaqddc.html">&lt;&lt;
数字下变频（DDC）</a>|&nbsp;<a href="usrpfaq.html">^ USRP 
FAQ 首页 ^</a>| 
<a href="usrpfaqiopins.html">数
字 I/O 
管脚控制 &gt;&gt;</a> ]</font></b></p>
<ul><li><font size="2"><b>So from what I understand, in the transmit side the digital up converters 
are implemented in the AD9862 chip but the interpolation is done in the FPGA. I 
believe in the receive side the down conversion is done in the FPGA. So why 
can't we do the same for the transmit side and implement the Digital UP 
Converters in the FPGA? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">On the transmit side we use our own CIC to interpolate from whatever ratio 
comes over the USB to 32 MS/s. This is sent to the 9862 which then interpolates 
again by a factor of four to bring us to 128 MS/s. The up converter is in the 
9862 as you say. In the receive side, the down conversion is done in the FPGA, 
because the 9862 does not have a down converter in the RX path. The bus going to 
the TX path on the 9862 is multiplexed (I then Q samples), and we run it at our 
normal clock rate of 64 MHz. This means we can only get 32 MS/s complex across 
it. If we did the up conversion in the FPGA, we would thus be limited to about a 
12 MHz carrier. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>The AD9862 chip contains interpolation filters as well. Could those be 
used instead of the CIC interpolators on the FPGA? In that way, both the up 
conversion and the interpolation would be done in the AD9862 chip and more space 
would be available on the FPGA? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">We use those interpolation filters already, but they only do a factor of 4, 
so we still need a CIC in the FPGA. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>What happened to the cic_int_shifter.v file in the USRP source? I am 
looking at re-enabling up conversion in the FPGA but cannot seem to locate this 
file. </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">It's still in: <a href="http://gnuradio.org/trac/browser/gnuradio/trunk/usrp/fpga/sdr_lib/cic_int_shifter.v" rel="nofollow">usrp/fpga/sdr_lib/cic_int_shifter.v</a></font>
</p></blockquote></blockquote>
<ul><li><font size="2"><b>Is the data being clocked out of the USRP to DAC is at 64Msps? 
</b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">More precisely, there are two interleaved channels, each running at 32MS/s. 
The AD9862 interpolates each stream by 4, giving two streams at 128MS/s. 
</font></p></blockquote></blockquote>
<ul><li><font size="2"><b>There are two points that interpolation can happen - inside the AD9862 
and internal to the FPGA. Within the FPGA, the CIC filter is the interpolating 
structure and has a variable rate, whereas the AD9862 has a fixed interpolation 
rate of 2x if a real-only signal is being used, or 4x is possible if interleaved 
with I/Q at 64Msps - giving the sample rate of I/Q 32Msps.Is that correct? 
</b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">Yes. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>I am unsure what the minimum interpolating rate of the CIC is, or the 
maximum for that matter? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">It's probably 1 or 2, though I doubt it's been tested. The (workable) maximum 
is determined by the width of the intermediate stages of the CIC. I believe 
we're good to 128 in the FPGA CIC. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>Who sets the interpolation rate of the CIC internal to the FPGA to get 
from the specified number of samples per symbol from a modulator block in GNU 
Radio to a number that the CIC can interpolate into 64Msps? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">The code in usrp_standard.cc controls the FPGA interpolation rate. The rates 
do not have to be powers of two. From the user point of view the net 
interpolation rate must be in [4, 512] and a multiple of 4. This is all 
controlled in usrp_standard.cc. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>There are 2 complex interpolators implemented in the FPGA (say int0, and 
int1). There are 4 real (ie, 2 complex) up converters implemented in the DAC 
chips (say DAC0, DAC1, DAC2, DAC3). The mux routes I and Q of int0 and int1 to 
the appropriate DACs. Is it true that DAC0,1 are hardwired to the TXA side of 
the USRP and dac2,3 to the TXB? Also, is the second complex interpolator used 
only if nchannels = 2? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">Yes. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>I found out that the max TX freq is limited in usrp_standard.cc to 44MHz 
(since USE_FPGA_TX_CORDIC is undefined). Now, since a 128MSps should safely 
ensure 64MHz, what is actually imposing that limitation? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">Its set by the passband of the interpolator in the AD9862. The digital up 
converters in the AD9862 don't allow you to set the frequency to values close to 
the Nyquist frequencies (from 44MHz to 84MHz). Since it samples at 128 MHz, the 
prohibited ranges are around multiples of 64 MHz. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>I'm having trouble understanding exactly how to go about sending two 
independent, real-valued signals to different SMA connectors on the same 
transmit daughterboards? </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">As the software is currently built, you cannot send two independent, 
real-valued signals to different connectors on the same transmit daughterboard. 
The reason is that we are using the digital up-converters in the AD9862, and 
have the AD9862's configured in "Dual Channel Complex DAC Data" mode. See pages 
20-21 of the AD9862 datasheet. If you only need two independent TX channels, the 
quick fix is to use two Basic Tx daughterboards. This is supported. Just tell 
the USRP that you're using two channels of data, and then provide a stream with 
two interleaved channels of I &amp; Q data. An additional thought is that if you 
don't need digital up-conversion, I don't think it would take much to get two 
independent channels out. You should be able to use the existing FPGA and host 
code, and just manually jam the right magic values into the AD9862 registers 19 
and 20. Make sure that you continue to run the 4x interpolator on the AD9862 so 
all the data rates remain the same. You can write the AD9862 regs from python 
using: </font></p><font face="Courier New" size="2">u = 
usrp.sink_s(...)<br>u._write_9862(which_codec, regno, value) # note the leading 
_ character<br># which_codec is 0 or 1 for side A or B<br></font></blockquote>
<p><font size="2">Look in <a href="http://gnuradio.org/trac/browser/gnuradio/trunk/usrp/host/lib/usrp_standard.cc" rel="nofollow">usrp_standard.cc</a> to see how we normally setup these registers. 
</font></p></blockquote>
<ul><li><font size="2"><b>At what rate should I send the samples to the tx_chains? Is every 4 clock 
cycles? They seem to be controlled by tx_strobe, but I failed to understand what 
this signal actually mean. </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">The minimum interpolation rate is 4 due to the CIC filter limitations, so 
once every 4 will yield one side of the spectrum. I believe 128 is the other end 
of the spectrum, but you should set a constant for the rate so we can test with 
different ones. The tx_strobe happens once every rate clock cycles - with which 
it will send in a new sample. That strobe sends a new value down the TX stream 
and reads a new one ready for the next tx_strobe. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>What is the point of the bus_reset and the clear_status signal? They are 
both input to current tx_buffer. </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">I am not sure of this - but I am assuming to stop/reset the transmit path and 
clear any status messages respectively. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>We have multiple USRPs clock-synchronized, but we haven't found a way to 
set things up so that the different sample streams hit the D/A converters at the 
same clock. </b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">We have gotten multiple USRPs synchronized for receive. That FPGA code and 
host code is in the subversion. For transmit, the problem could be a bit more 
difficult, depending on whether you can deal with a constant phase difference 
between the transmitting USRPs or not (MIMO vs beam forming). If you need the 
phases to be identical between the USRPs then you will have to change the 
verilog such that you are no longer using the digital up converters in the 
AD9862 and instead implement the DUC in the FPGA. This is because there's no way 
to directly control the phase accumulator in the AD9862. If you can deal with a 
constant phase offset, then a strategy similar to what Marin used for Rx should 
work for TX. </font></p></blockquote></blockquote>
<ul><li><font size="2"><b>My questions are regarding tx_chain.v. I am a bit confused as to how the 
flow of the code would proceed. There is no "always" statement in the code. 
</b></font></li></ul>
<blockquote>
<blockquote>
<p><font size="2">This is just wiring a couple things together to get the transmission chain to 
work at the full clock rate. There are 3 main components here: a phase 
accumulator, a CORDIC and an interpolating CIC filter. The baseband signals are 
fed into the CORDIC along with a phase from the phase accumulator. For each 
sample that goes in, the phase accumulator rotates. This generates an IF that is 
mixed with your baseband signal. The interpolating CIC filter gets your baseband 
signal up to the proper sample rate to feed the DACs. 
</font></p></blockquote></blockquote>
<p><font size="2"><br></font></p><p><font size="2"><br></font></p><p style="text-align:right"><b><font size="2">[ <a href="usrpfaqddc.html">&lt;&lt;数字下变频（DDC）</a>|&nbsp;<a href="usrpfaq.html">^ USRP 
FAQ 首页 ^</a>| 
<a href="usrpfaqiopins.html">数字 I/O 
管脚控制 &gt;&gt;</a> ]</font></b></p><p><font size="2"><br></font></p><p><font size="2"><br></font></p><p><font size="2"><br></font></p><p><font size="2"><br></font></p><p><br></p><p><font size="2"><b><br></b></font></p><p><font size="2"><b>注：<a href="http://gnuradio.org/redmine/projects/gnuradio/wiki/UsrpFAQDUC" target="_blank">Digital Upconverter Questions</a>（原文出处，翻译整理仅供参考!）</b></font></p></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div id="sites-attachments-container">
</div>
</div>
</div> 
</td> 
<td id="sites-chrome-sidebar-right" class="sites-layout-sidebar-right initial" style="width:190px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_9153814178763965" class="sites-embed" role="navigation"><h4 class="sites-embed-title"> GNURadio 中文社区</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://gnuradio.microembedded.com/" class="sites-navigation-link">GNURadio：中文维客</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://gnuradio.microembedded.com/pageindex" class="sites-navigation-link">标题索引：GNURadio</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_3158427237433027" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/installinggr" jotid="wuid:gx:19c4ea49ca981168" class="sites-navigation-link">GNURadio: 安装指导</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/faq" jotid="wuid:gx:59d38b2d5aff0b87" class="sites-navigation-link">GNURadio: 常见问题</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/tutorials" jotid="wuid:gx:c2443ff1f7a56ec" class="sites-navigation-link">GNURadio: 讲义教程</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/development" jotid="wuid:gx:447c739ef5066bd4" class="sites-navigation-link">GNURadio: 社区贡献</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_6502772558432737" class="sites-embed" role="navigation"><h4 class="sites-embed-title"> GNURadio 最新发布</h4><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="https://sites.google.com/a/microembedded.com/gnuradio/news#TOC-GNU-Radio:-GNU-Radio-release-3.6.3-available-for-download" class="sites-navigation-link">GNURadio 3.6.3</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="https://sites.google.com/a/microembedded.com/gnuradio/news#TOC-GNU-Radio:-GNU-Radio-release-candidate-3.6.3rc0-available-for-download" class="sites-navigation-link">GNURadio 3.6.3rc0</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_4277110048101279" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://gnuradio.microembedded.com/openbts" class="sites-navigation-link">GNURadio - OpenBTS 中文维客 </a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_41189823539683246" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://openbts.microembedded.com/" class="sites-navigation-link">（Range）- OpenBTS 中文社区</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_43043355133298733" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_6312697504782834" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://ossie.microembedded.com/" class="sites-navigation-link">SCA - OSSIE 中文维客</a></div></li></ul></div></div>
</td>
</tr>
</tbody></table>
                    <!-- InstanceEndEditable -->
                    </div>
                </div>
                <div id="sites-chrome-footer-wrapper">
                    <div id="sites-chrome-footer-wrapper-inside">
                        <div id="sites-chrome-footer">
                            <div xmlns="http://www.w3.org/1999/xhtml" class="sites-subfooter">
                                <div class="sites-subfooter-content">
                                    <div dir="ltr">
                                        <div style="text-align:center;font-family:simsun,serif">
                                            <div style="overflow:auto"> <font size="2"><span style="border-collapse:separate;color:rgb(0,0,0);font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px"><span style="text-align:center"><span style="border-collapse:separate;color:rgb(0,0,0);font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px"><span style="border-collapse:collapse">"This is an unofficial translation of the Gnu Radio project homepage.  Please use<span> </span><a href="http://gnuradio.org/">http://gnuradio.org/</a><span> </span> in case of any doubt." 此乃 GNU Radio 非官方中文翻译，如有疑问请参阅<span> </span></span></span><a href="http://gnuradio.org">http://gnuradio.org</a>。<br>
                                                <span style="border-collapse:separate;color:rgb(0,0,0);font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px"><span style="border-collapse:collapse">Chinese translation provided by<br>
                                                <span> </span>
                                                <a href="http://www.microembedded.com/" target="_blank">Microembedded Electronic (Beijing) Co. Ltd.</a><span> </span></span></span><a href="http://www.microembedded.com/" target="_blank">微嵌电子技术（北京）有限责任公司</a>
                                                <span> </span>提供翻译</span></span></font><br><br>
                                                <font>©2009 MicroEmbedded 备案信息：京ICP备15049573号 京公网安备：110108904713</font>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="sites-chrome-onebar-footer"> </div>
</body>
<!-- InstanceEnd --></html>